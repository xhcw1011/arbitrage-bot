# 可行性分析与补充文档

## 1. 可行性分析 (Feasibility Analysis)

### 1.1 策略可行性
- **Funding Rate 套利**: 
  - **优势**: 市场中性策略，风险较低。Hyperliquid 和 Base 链上的 DEX (Lighter, EdgeX) 确实存在资金费率差异，理论上可行。
  - **挑战**: 资金费率波动大，需要高频监控；Base 链 Gas 费虽然低但仍有成本，需计算净收益（Funding Income - Trading Fees - Gas Fees）。
- **XP/空投任务**:
  - **优势**: 增加额外收益，且可以通过刷量脚本自动化。
  - **挑战**: 交易所可能查女巫（Sybil Attack），需要模拟真实用户行为（如随机间隔、随机金额）。

### 1.2 技术架构可行性
- **Go 语言**: 非常适合此类高并发、低延迟的场景。
- **架构设计**: 清晰的分层架构 (Exchange -> Strategy -> Service) 易于维护和扩展。

### 1.3 风险点
- **单腿风险 (Leg Risk)**: 一边成交另一边未成交，导致敞口暴露。需要实现原子性下单或快速重试/撤单机制。
- **API 限制**: 交易所 API Rate Limit 可能限制高频操作。需要实现 Rate Limiter。
- **资金利用率**: 资金分散在多处可能导致利用率不足。

## 2. 缺失内容补充 (Supplements)

原文档在宏观设计上很完善，但在落地细节上可以补充以下内容：

### 2.1 具体的配置结构 (`config.yaml`)
原文档未给出具体配置字段，建议补充如下：

```yaml
app:
  log_level: "info"
  port: 8080

exchanges:
  hyperliquid:
    api_key: "..."
    secret_key: "..."
    wallet_address: "..."
  lighter:
    private_key: "..." # Base 链通常使用私钥签名
  edgex:
    api_key: "..."
    secret_key: "..."

strategies:
  funding_arb:
    enabled: true
    pairs: ["ETH-USD", "BTC-USD"]
    min_funding_diff: 0.001 # 0.1%
    leverage: 2.0
    check_interval_ms: 1000
  xp_farming:
    enabled: true
    target_volume_daily: 10000
    max_slippage: 0.0005
```

### 2.2 数据持久化 (Persistence)
原文档仅提到日志，建议增加轻量级数据库 (SQLite) 用于存储：
- **Trade History**: 方便统计 PnL 和 XP 进度。
- **Active Positions**: 程序重启后恢复状态。

### 2.3 监控与告警 (Monitoring)
建议增加 Prometheus Metrics 暴露，配合 Grafana 监控：
- 当前 Funding Rate 差值曲线
- 账户余额变化
- 延迟 (Latency)

### 2.4 具体的 API 交互细节
- **Hyperliquid**: 使用其 Info API 获取行情，Exchange API 下单。注意它是 L1 链，需要专门的签名逻辑。
- **Lighter/EdgeX**: 都在 Base 链，可能涉及到 EVM 交互或特定的 REST API。需要确认是否需要 RPC 节点 (如 Alchemy/Infura)。

## 3. 建议的下一步行动
1. **初始化项目结构**: 按照文档创建目录。
2. **实现 Exchange Interface**: 先跑通 Hyperliquid 的 Public API。
3. **配置系统**: 实现 `config.yaml` 读取。
