# é¡¹ç›®å®Œæˆæ€»ç»“

## ğŸ‰ å·²å®ç°åŠŸèƒ½

### 1. ä¸‰äº¤æ˜“æ‰€ API å¯¹æ¥ âœ…
| åŠŸèƒ½ | Hyperliquid | Lighter | EdgeX |
|------|------------|---------|-------|
| GetFundingRate | âœ… SDK | âœ… REST | âœ… REST |
| GetPrice | âœ… SDK | âŒ | âœ… REST |
| PlaceOrder | âœ… å®Œæ•´ | âŒ | âŒ |
| WebSocket | âš ï¸ SDKæ”¯æŒ | âš ï¸ SDKæ”¯æŒ | âœ… å·²å®ç° |

### 2. æ ¸å¿ƒç­–ç•¥ âœ…
- **Funding Rate å¥—åˆ©**: å®æ—¶ç›‘æ§ä¸‰ä¸ªäº¤æ˜“æ‰€,è®¡ç®—ä»·å·®,è§¦å‘å¥—åˆ©æœºä¼š
- **XP åˆ·é‡**: éšæœºé—´éš”æ‰§è¡Œ wash trade,å¢åŠ äº¤æ˜“é‡è·å–ç§¯åˆ†
- **è‡ªåŠ¨ä¸‹å•**: Hyperliquid å®Œæ•´å®ç°,æ”¯æŒé™ä»·å•å’Œå¸‚ä»·å•

### 3. WebSocket æ”¯æŒ âœ…
- **EdgeX**: å®Œæ•´å®ç°,æ”¯æŒå®æ—¶ ticker è®¢é˜…
- **å¿ƒè·³æœºåˆ¶**: è‡ªåŠ¨ ping/pong ä¿æŒè¿æ¥
- **è‡ªåŠ¨é‡è¿**: è¿æ¥æ–­å¼€æ—¶è‡ªåŠ¨é‡è¿

### 4. é…ç½®ç³»ç»Ÿ âœ…
- **çƒ­é…ç½®**: ä½¿ç”¨ Viper è¯»å– `config.yaml`
- **å¤šäº¤æ˜“æ‰€**: æ”¯æŒé…ç½®å¤šä¸ªäº¤æ˜“æ‰€çš„ API Key
- **ç­–ç•¥å¼€å…³**: å¯ç‹¬ç«‹å¼€å¯/å…³é—­å„ä¸ªç­–ç•¥

## ğŸ“Š é¡¹ç›®ç»“æ„

```
arbitrage-bot/
â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ main.go              # ä¸»ç¨‹åºå…¥å£
â”‚   â””â”€â”€ test_ws/main.go      # WebSocket æµ‹è¯•ç¨‹åº
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.yaml          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ config/              # é…ç½®åŠ è½½
â”‚   â”œâ”€â”€ exchange/            # äº¤æ˜“æ‰€å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ interface.go     # ç»Ÿä¸€æ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ hyperliquid/     # Hyperliquid å®ç°
â”‚   â”‚   â”œâ”€â”€ lighter/         # Lighter å®ç°
â”‚   â”‚   â””â”€â”€ edgex/           # EdgeX å®ç°
â”‚   â””â”€â”€ strategy/            # ç­–ç•¥å®ç°
â”‚       â”œâ”€â”€ funding_arb.go   # Funding å¥—åˆ©
â”‚       â””â”€â”€ xp_farming.go    # XP åˆ·é‡
â”œâ”€â”€ pkg/
â”‚   â””â”€â”€ ws/                  # WebSocket å®¢æˆ·ç«¯
â”‚       â””â”€â”€ edgex_ws.go      # EdgeX WebSocket
â””â”€â”€ docs/                    # æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½®
ç¼–è¾‘ `config/config.yaml`:
```yaml
exchanges:
  hyperliquid:
    private_key: "YOUR_PRIVATE_KEY"  # ç”¨äºä¸‹å•
  
strategies:
  funding_arb:
    enabled: true
    execute_trades: false  # è®¾ä¸º true å¯ç”¨è‡ªåŠ¨äº¤æ˜“
```

### 2. è¿è¡Œ
```bash
# ä¸»ç¨‹åº
go run cmd/main.go

# WebSocket æµ‹è¯•
go run cmd/test_ws/main.go
```

## ğŸ“ˆ è¿è¡Œæ•ˆæœ

### ç›‘æ§æ¨¡å¼
```
2025/11/24 14:20:01 Checking funding opportunities...
2025/11/24 14:20:01 [ETH-USD] Best Diff: 0.000087 (Threshold: 0.001000) - No Opportunity
2025/11/24 14:20:01 [BTC-USD] Best Diff: 0.000058 (Threshold: 0.001000) - No Opportunity
```

### å‘ç°æœºä¼šæ—¶
```
2025/11/24 14:20:01 OPPORTUNITY FOUND [ETH-USD]: 
  Buy ETH on lighter (Rate: 0.00005) / Sell on hyperliquid (Rate: 0.00015) | Diff: 0.0001
```

### è‡ªåŠ¨ä¸‹å• (execute_trades: true)
```
2025/11/24 14:20:01 Executing Arbitrage: Long 0.01 ETH-USD on lighter, Short 0.01 ETH-USD on hyperliquid
2025/11/24 14:20:02 Placed Long on hyperliquid at 3250.50
```

## âš ï¸ é‡è¦è¯´æ˜

### ä¸‹å•åŠŸèƒ½é™åˆ¶

#### Hyperliquid âœ…
- **çŠ¶æ€**: å®Œå…¨å®ç°
- **ç­¾å**: EIP-712 (é€šè¿‡ SDK)
- **å¯ç”¨**: ç«‹å³å¯ç”¨

#### Lighter âš ï¸
- **çŠ¶æ€**: ä»…ç›‘æ§
- **é—®é¢˜**: éœ€è¦ C ç­¾ååº“
- **å¤æ‚åº¦**: é«˜
- **å»ºè®®**: æ‰‹åŠ¨å¯¹å†²æˆ–ç­‰å¾…åç»­å®ç°

#### EdgeX âš ï¸
- **çŠ¶æ€**: ä»…ç›‘æ§
- **é—®é¢˜**: éœ€è¦ StarkEx L2 ç­¾å
- **å¤æ‚åº¦**: æé«˜
- **å»ºè®®**: æ‰‹åŠ¨å¯¹å†²æˆ–ç­‰å¾…åç»­å®ç°

### æ¨èä½¿ç”¨æ–¹æ¡ˆ

**æ–¹æ¡ˆ A: å•äº¤æ˜“æ‰€è‡ªåŠ¨åŒ–** (æ¨è)
```
ç›‘æ§: Hyperliquid + Lighter + EdgeX
æ‰§è¡Œ: ä»… Hyperliquid è‡ªåŠ¨ä¸‹å•
å¯¹å†²: æ‰‹åŠ¨åœ¨å…¶ä»–äº¤æ˜“æ‰€å¯¹å†²
```

**æ–¹æ¡ˆ B: çº¯ç›‘æ§æ¨¡å¼**
```
ç›‘æ§: æ‰€æœ‰äº¤æ˜“æ‰€
æ‰§è¡Œ: å…¨éƒ¨æ‰‹åŠ¨
ä¼˜åŠ¿: æ— é£é™©,ä»…æä¾›å†³ç­–æ”¯æŒ
```

**æ–¹æ¡ˆ C: å®Œå…¨è‡ªåŠ¨åŒ–** (é•¿æœŸç›®æ ‡)
```
éœ€è¦å®ç°:
1. Lighter C ç­¾ååº“é›†æˆ (1-2å¤©)
2. EdgeX StarkEx ç­¾å (2-3å¤©)
3. å®Œæ•´æµ‹è¯• (1å‘¨)
```

## ğŸ“š æŠ€æœ¯äº®ç‚¹

### 1. ç»Ÿä¸€æ¥å£è®¾è®¡
```go
type Exchange interface {
    GetFundingRate(symbol string) (float64, error)
    GetPrice(symbol string) (float64, error)
    PlaceOrder(req *OrderRequest) (*OrderResponse, error)
    // ...
}
```

### 2. å¹¶å‘ç­–ç•¥æ‰§è¡Œ
```go
// Funding Arb å’Œ XP Farming å¹¶è¡Œè¿è¡Œ
go arbStrategy.Start(ctx)
go xpStrategy.Start(ctx)
```

### 3. WebSocket å®æ—¶æ•°æ®
```go
wsClient.Subscribe("ticker.10000001", func(data json.RawMessage) {
    // å®æ—¶å¤„ç† ticker æ•°æ®
})
```

### 4. é…ç½®åŒ–è®¾è®¡
- æ‰€æœ‰å‚æ•°å¯é€šè¿‡ `config.yaml` è°ƒæ•´
- æ— éœ€é‡æ–°ç¼–è¯‘å³å¯ä¿®æ”¹ç­–ç•¥å‚æ•°

## ğŸ”® åç»­ä¼˜åŒ–æ–¹å‘

### çŸ­æœŸ (1å‘¨å†…)
1. âœ… EdgeX WebSocket é›†æˆåˆ°ç­–ç•¥
2. â¬œ Lighter WebSocket æ”¯æŒ
3. â¬œ å®ç° Lighter GetPrice

### ä¸­æœŸ (1ä¸ªæœˆ)
1. â¬œ Lighter ä¸‹å•åŠŸèƒ½ (C åº“é›†æˆ)
2. â¬œ EdgeX ä¸‹å•åŠŸèƒ½ (StarkEx ç­¾å)
3. â¬œ æŒä¹…åŒ– (SQLite)
4. â¬œ ç›‘æ§é¢æ¿ (Prometheus + Grafana)

### é•¿æœŸ
1. â¬œ å›æµ‹ç³»ç»Ÿ
2. â¬œ é£æ§ç³»ç»Ÿ (æ­¢æŸã€ä»“ä½ç®¡ç†)
3. â¬œ å¤šç­–ç•¥ç»„åˆ
4. â¬œ æœºå™¨å­¦ä¹ ä¼˜åŒ–

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### æµ‹è¯•é˜¶æ®µ
1. è®¾ç½® `execute_trades: false`
2. è§‚å¯Ÿæ—¥å¿—,éªŒè¯æœºä¼šè¯†åˆ«å‡†ç¡®æ€§
3. æ‰‹åŠ¨æ‰§è¡Œå‡ æ¬¡éªŒè¯ç­–ç•¥

### å°é¢è¿è¡Œ
1. è®¾ç½® `execute_trades: true`
2. ä½¿ç”¨å°é¢èµ„é‡‘ (å¦‚ 100 USDT)
3. ç›‘æ§ 1-2 å¤©,éªŒè¯ç¨³å®šæ€§

### æ­£å¼è¿è¡Œ
1. å¢åŠ èµ„é‡‘åˆ°ç›®æ ‡è§„æ¨¡
2. è®¾ç½®åˆç†çš„é˜ˆå€¼ (min_funding_diff)
3. å®šæœŸæ£€æŸ¥æ—¥å¿—å’Œæ”¶ç›Š

## ğŸ›¡ï¸ é£é™©æç¤º

1. **API Key å®‰å…¨**: 
   - ä¸è¦æäº¤åˆ° Git
   - ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–åŠ å¯†å­˜å‚¨
   - ä»…å¼€å¯äº¤æ˜“æƒé™,ç¦ç”¨æç°

2. **å¸‚åœºé£é™©**:
   - Funding Rate å¯èƒ½å¿«é€Ÿå˜åŒ–
   - æµåŠ¨æ€§ä¸è¶³å¯èƒ½å¯¼è‡´æ»‘ç‚¹
   - æç«¯è¡Œæƒ…ä¸‹å¯èƒ½æ— æ³•å¯¹å†²

3. **æŠ€æœ¯é£é™©**:
   - API å¯èƒ½é™æµæˆ–æ•…éšœ
   - WebSocket å¯èƒ½æ–­è¿
   - ç¨‹åºå¯èƒ½å´©æºƒ

4. **å»ºè®®**:
   - ä»å°é¢å¼€å§‹
   - è®¾ç½®æ­¢æŸ
   - å®šæœŸæ£€æŸ¥ä»“ä½
   - ä¿æŒäººå·¥ç›‘æ§

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜,è¯·æŸ¥çœ‹:
- `docs/APIå¯¹æ¥æ€»ç»“.md` - API è¯¦ç»†è¯´æ˜
- `docs/WebSocketä¸ä¸‹å•å®ç°è®¡åˆ’.md` - å®ç°è®¡åˆ’
- `docs/å¯è¡Œæ€§åˆ†æä¸è¡¥å…….md` - å¯è¡Œæ€§åˆ†æ

## ğŸ“ æ€»ç»“

è¿™ä¸ªé¡¹ç›®å·²ç»å®ç°äº†ä¸€ä¸ª**å¯ç”¨çš„ DEX å¥—åˆ©ç›‘æ§å’Œè‡ªåŠ¨äº¤æ˜“ç³»ç»Ÿ**:

âœ… **æ ¸å¿ƒåŠŸèƒ½å®Œæ•´**: ç›‘æ§ã€åˆ†æã€ä¸‹å•(Hyperliquid)
âœ… **æ¶æ„æ¸…æ™°**: æ˜“äºæ‰©å±•å’Œç»´æŠ¤
âœ… **é…ç½®çµæ´»**: é€‚åº”ä¸åŒä½¿ç”¨åœºæ™¯
âœ… **æ–‡æ¡£å®Œå–„**: ä¾¿äºç†è§£å’Œä½¿ç”¨

âš ï¸ **å¾…å®Œå–„**: Lighter/EdgeX ä¸‹å•éœ€è¦é¢å¤–å·¥ä½œ

**å»ºè®®**: å…ˆä½¿ç”¨ Hyperliquid å•äº¤æ˜“æ‰€æ¨¡å¼,éªŒè¯ç­–ç•¥æœ‰æ•ˆæ€§åå†è€ƒè™‘å®Œæ•´è‡ªåŠ¨åŒ–ã€‚
