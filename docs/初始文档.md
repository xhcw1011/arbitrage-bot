好的，我给你整理一个 完整的落地方案与实施计划文档，针对你的 DEX 永续套利 + Funding 对冲 + XP/空投自动化机器人 项目。文档内容包括目标、策略、资金分配、技术架构、API 对接、自动化逻辑、风险控制和部署方案。

⸻

DEX 永续套利 + Funding / XP 自动化机器人 计划文档

1️⃣ 项目目标
	1.	核心目标
	•	实现多 DEX 永续合约 Funding Rate 套利
	•	自动完成积分/XP 收集或空投任务
	•	长期无人值守运行，提高 2k USDT 小资金收益率
	2.	可量化指标
	•	Funding 套利收益率目标：年化 10%-15%（视市场波动）
	•	XP / 空投：按交易量或任务完成度获取额外收益
	•	资金安全：API Key 只开交易权限，提现需手动

⸻

2️⃣ 资金与交易所分配

平台 / 链	链类型	分配资金	备注
Hyperliquid	HL 链	800 USDC	用于 Funding 套利 & 对冲
Lighter	Base	600 USDC	与 EdgeX 做 Funding 套利对冲
EdgeX	Base	600 USDC	与 Lighter 做 Funding 套利对冲
Base 链 gas	Base	0.005 ETH	支付链上交易手续费

多链分布便于套利与积分任务同时执行，同时降低链上交易拥堵风险。

⸻

3️⃣ 策略设计

A. Funding 套利（Perp → Perp）
	•	原理：同时持有多空仓位，利用不同交易所 Funding Rate 差赚取利息
	•	实现方式：
	1.	WebSocket 订阅实时 Funding Rate
	2.	当差值 ≥ 阈值时，自动开多空仓对冲
	3.	仓位控制 ≤ 杠杆 3x
	4.	定时检查并平仓异常仓位

B. XP / 空投任务
	•	原理：交易所根据交易量或任务完成度发放积分/空投
	•	实现方式：
	1.	定时查询积分余额
	2.	如果不足阈值，自动下单增加交易量
	3.	同时运行 Funding 套利，不冲突

C. 策略组合逻辑
	•	Funding 套利 + XP/空投任务可以并行运行
	•	每个交易所独立处理，资金分配按策略比例执行
	•	自动化逻辑保证 delta 中性，降低风险

⸻

4️⃣ 技术架构

+---------------------+
|  cmd/main.go        |
|  启动入口，启动各策略 |
+---------------------+
           |
           v
+-------------------------+
|  internal/exchange/*    |
|  各交易所 API 封装      |
+-------------------------+
           |
           v
+-------------------------+
|  internal/strategy/*    |
|  Funding套利 + XP任务    |
+-------------------------+
           |
           v
+-------------------------+
|  internal/service/*     |
|  仓位管理 / 风控 / 日志  |
+-------------------------+
           |
           v
+-------------------------+
|  pkg/ws/ws_client.go    |
|  WebSocket 实时行情     |
+-------------------------+

	•	Go 语言：轻量高并发，适合实时套利
	•	goroutine：每个策略、每个交易所独立并发执行
	•	日志 & 通知：记录下单、平仓、Funding 收益、积分变化；异常告警 Telegram/Slack

⸻

5️⃣ API 对接
	•	Hyperliquid / Lighter / EdgeX
	•	REST API：获取 Funding Rate、下单、查询余额、查询仓位
	•	WebSocket：实时行情订阅、Funding Rate 变化
	•	统一接口封装：

type Exchange interface {
    GetFundingRate(symbol string)
    GetBalance(asset string)
    GetPosition(symbol string)
    PlaceOrder(symbol, side string, size, price float64, reduceOnly bool)
    ClosePosition(symbol string)
    GetPoints(symbol string)
}


⸻

6️⃣ 自动化逻辑
	1.	Funding 套利循环：
	•	获取 Funding Rate 差值
	•	差值超过阈值 → 自动开多空对冲仓
	•	定期检查仓位、平仓异常
	2.	XP / 空投循环：
	•	查询积分/空投余额
	•	低于阈值 → 自动下单增加交易量
	•	循环间隔 5~10 分钟
	3.	风险管理：
	•	杠杆限制 ≤ 3x
	•	仓位 delta 中性
	•	WebSocket 异常自动重连
	•	下单失败或异常触发告警

⸻

7️⃣ 部署与运维
	1.	本地 / VPS Docker 部署
	•	Docker 容器化，长时间运行
	•	CPU 占用低，内存小
	2.	日志管理：
	•	所有下单、平仓、Funding 收益、积分变化记录
	•	每日汇总输出
	3.	告警机制：
	•	Telegram / Slack 推送下单异常、Funding 差异常
	•	WebSocket 异常重连通知
	4.	配置管理：
	•	config.yaml 热加载
	•	调整阈值、杠杆、交易对无需重启

⸻

8️⃣ 资金安全
	•	API Key 只开交易权限
	•	提币手动操作，降低风险
	•	多交易所分散资金，降低单点风险
	•	资金尽量分布在交易频率高、手续费低的链

⸻

9️⃣ 收益预估（参考）

模式	年化收益	风险等级
Funding 套利	10%-15%	低（对冲）
XP / 空投任务	3%-5%	低（增加交易量）
组合策略	12%-18%	低-中（取决市场波动）

⚠ 注意：收益随 Funding Rate 差异波动，非固定收益

⸻

10️⃣ 实施计划

阶段	内容	时间
1	策略原型 + Funding Rate 测试	1-2 天
2	API 封装 + WebSocket 监听	2-3 天
3	Funding 套利策略落地	1-2 天
4	XP / 空投任务落地	1 天
5	风控与日志模块	1 天
6	部署测试（本地 / VPS Docker）	1 天
7	实盘运行与调整	持续


⸻

11️⃣ 总结
	•	Go 语言是最适合实盘长期运行的选择
	•	Funding 套利 + XP / 空投可并行执行，资金分配合理
	•	多交易所、多链分散风险
	•	自动化、日志、告警保证无人值守安全运行
	•	GitHub 仓库管理方便版本控制与团队协作

⸻

我可以下一步帮你做的就是：
生成这个项目的完整 GitHub 文件内容，按上面计划，直接可以 push 到你仓库里，包含所有代码和目录结构。

你希望我现在直接输出这些 GitHub 文件内容吗？